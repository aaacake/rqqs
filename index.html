<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>企业网站管理系统 - 优化版</title>
    <style>
        /* 基础布局 */
        * {
            box-sizing: border-box;
        }
        
        body {
            margin: 0;
            padding: 0;
            font-family: 'Microsoft YaHei', sans-serif;
            background: #ecf0f1;
            color: #333;
            transition: background-color 0.3s, color 0.3s;
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }
        
        /* 顶部导航栏 - 移动端 */
        #top-nav {
            background: #2c3e50;
            color: white;
            padding: 15px;
            display: none;
        }
        
        #mobileMenuBtn {
            background: #3498db;
            border: none;
            color: white;
            cursor: pointer;
            padding: 8px 15px;
            border-radius: 4px;
            font-size: 16px;
        }
        
        /* 侧边导航样式 */
        #sidebar {
            background: #2c3e50;
            color: white;
            transition: all 0.3s;
            position: relative;
            width: 100%;
        }
        
        /* 导航折叠按钮 */
        #toggleBtn {
            position: absolute;
            top: 10px;
            right: 10px;
            background: #3498db;
            border: none;
            color: white;
            cursor: pointer;
            padding: 5px 10px;
            display: none;
        }
        
        /* 导航菜单 */
        .nav-menu {
            margin-top: 50px;
            padding: 0;
            list-style: none;
        }
        
        .nav-item {
            padding: 15px 20px;
            border-bottom: 1px solid #34495e;
            cursor: pointer;
            transition: background 0.3s;
            position: relative;
        }
        
        .nav-item:hover {
            background: #34495e;
        }
        
        /* 子菜单样式 */
        .submenu {
            list-style: none;
            padding-left: 20px;
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease;
            background-color: #1a2530;
        }
        
        .submenu.active {
            max-height: 300px;
        }
        
        .submenu li {
            padding: 12px 15px;
            border-bottom: 1px solid #253341;
            transition: all 0.2s;
        }
        
        .submenu li:hover {
            background: #253341;
            padding-left: 18px;
        }
        
        /* 箭头指示器 */
        .arrow {
            position: absolute;
            right: 20px;
            transition: transform 0.3s ease;
        }
        
        .arrow.down {
            transform: rotate(90deg);
        }
        
        /* 主内容区 */
        #content {
            flex: 1;
            padding: 20px;
            background: #ecf0f1;
            transition: background-color 0.3s;
        }
        
        /* 管理员登录区域 */
        #adminPanel {
            background: #fff;
            padding: 20px;
            border-radius: 5px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            margin-top: 20px;
            display: none; /* 默认隐藏 */
            transition: background-color 0.3s, box-shadow 0.3s;
        }
        
        /* 折叠状态样式 */
        .collapsed {
            width: 60px !important;
        }
        
        .collapsed .nav-text {
            display: none;
        }
        
        .collapsed .arrow {
            display: none; /* 收起侧边栏时隐藏箭头 */
        }
        
        .collapsed .submenu li {
            padding-left: 5px;
        }
        
        /* 编辑模式样式 */
        .editable {
            border: 1px dashed #3498db;
            padding: 10px;
            margin: 10px 0;
            min-height: 50px;
            transition: border-color 0.3s, background-color 0.3s;
        }
        
        /* 子栏目内容区 */
        .sub-content {
            display: none;
            margin-top: 20px;
            padding: 15px;
            background: white;
            border-radius: 5px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            transition: background-color 0.3s, box-shadow 0.3s;
        }
        
        /* 夜间模式样式 */
        body.night-mode {
            background: #121212;
            color: #e0e0e0;
        }
        
        body.night-mode #top-nav,
        body.night-mode #sidebar {
            background: #1a1a1a;
        }
        
        body.night-mode .nav-item {
            border-bottom: 1px solid #333;
        }
        
        body.night-mode .nav-item:hover {
            background: #333;
        }
        
        body.night-mode .submenu {
            background-color: #0d0d0d;
        }
        
        body.night-mode .submenu li {
            border-bottom: 1px solid #222;
        }
        
        body.night-mode .submenu li:hover {
            background: #222;
        }
        
        body.night-mode #content {
            background: #121212;
        }
        
        body.night-mode .sub-content,
        body.night-mode #adminPanel {
            background: #1e1e1e;
            color: #e0e0e0;
            box-shadow: 0 2px 10px rgba(0,0,0,0.3);
        }
        
        body.night-mode .editable {
            border: 1px dashed #4d9de0;
            background: #252525;
        }
        
        /* 模式切换按钮 */
        #modeToggle {
            position: fixed;
            top: 20px;
            right: 20px;
            background: #3498db;
            border: none;
            color: white;
            padding: 8px 15px;
            border-radius: 4px;
            cursor: pointer;
            font-family: 'Microsoft YaHei', sans-serif;
            font-size: 14px;
            z-index: 100;
            transition: background-color 0.3s;
        }
        
        #modeToggle:hover {
            background: #2980b9;
        }
        
        body.night-mode #modeToggle {
            background: #4d9de0;
        }
        
        /* 响应式设计 */
        @media (min-width: 769px) {
            /* 桌面布局 - 左侧导航20% + 右侧内容80% */
            body {
                flex-direction: row;
            }
            
            #sidebar {
                width: 20%;
                height: 100vh;
                position: sticky;
                top: 0;
            }
            
            #content {
                width: 80%;
            }
            
            #toggleBtn {
                display: block;
            }
        }
        
        @media (max-width: 768px) {
            /* 移动端布局 */
            #top-nav {
                display: block;
            }
            
            #sidebar {
                position: fixed;
                top: 0;
                left: -100%;
                height: 100vh;
                width: 85%;
                max-width: 300px;
                z-index: 100;
                transition: left 0.3s ease;
            }
            
            #sidebar.mobile-open {
                left: 0;
                box-shadow: 3px 0 15px rgba(0,0,0,0.2);
            }
            
            #overlay {
                display: none;
                position: fixed;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                background: rgba(0,0,0,0.5);
                z-index: 99;
            }
            
            #overlay.active {
                display: block;
            }
            
            .collapsed .nav-text {
                display: inline;
            }
        }
        
        .action-btn {
            background: #3498db;
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            margin: 5px;
            transition: background 0.3s;
        }
        
        .action-btn:hover {
            background: #2980b9;
        }
        
        body.night-mode .action-btn {
            background: #4d9de0;
        }
        
        .btn-group {
            display: flex;
            flex-wrap: wrap;
            margin-top: 15px;
        }
        
        .subtitle {
            color: #7f8c8d;
            font-size: 0.9em;
            margin-bottom: 20px;
            border-left: 3px solid #3498db;
            padding-left: 10px;
        }
        
        .version {
            font-size: 0.6em;
            color: #7f8c8d;
            vertical-align: super;
        }
    </style>
</head>
<body>
    <!-- 日间/夜间模式切换按钮 -->
    <button id="modeToggle">夜间模式</button>
    
    <!-- 移动端顶部导航 -->
    <div id="top-nav">
        <button id="mobileMenuBtn">☰☰ 导航菜单</button>
    </div>
    
    <!-- 遮罩层 -->
    <div id="overlay"></div>
    
    <!-- 左侧导航 -->
    <div id="sidebar">
        <button id="toggleBtn">≡</button>
        <ul class="nav-menu">
            <li class="nav-item">
                <span class="nav-text">首页</span>
            </li>
            <li class="nav-item has-submenu">
                <span class="nav-text">产品介绍</span>
                <span class="arrow">▶</span>
                <ul class="submenu">
                    <li>旗舰产品</li>
                    <li>新品发布</li>
                    <li>产品分类</li>
                    <li>解决方案</li>
                </ul>
            </li>
            <li class="nav-item has-submenu">
                <span class="nav-text">服务项目</span>
                <span class="arrow">▶</span>
                <ul class="submenu">
                    <li>咨询服务</li>
                    <li>技术支持</li>
                    <li>定制开发</li>
                    <li>培训服务</li>
                </ul>
            </li>
            <li class="nav-item has-submenu">
                <span class="nav-text">关于我们</span>
                <span class="arrow">▶</span>
                <ul class="submenu">
                    <li>公司简介</li>
                    <li>发展历程</li>
                    <li>团队介绍</li>
                    <li>荣誉资质</li>
                </ul>
            </li>
            <li class="nav-item has-submenu">
                <span class="nav-text">联系方式</span>
                <span class="arrow">▶</span>
                <ul class="submenu">
                    <li>联系我们</li>
                    <li>分支机构</li>
                    <li>在线留言</li>
                    <li>招贤纳士</li>
                </ul>
            </li>
        </ul>
    </div>
    
    <!-- 主内容区 -->
    <div id="content">
        <h1>企业网站管理系统 <small class="version">优化版</small></h1>
        <p class="subtitle">优化了侧边栏交互：收起时隐藏箭头，点击栏目时自动收起其他栏目</p>
        
        <div class="editable" id="homeContent">
            欢迎访问我们的企业网站！这里可以展示公司最新动态和重要信息。企业网站管理系统让您轻松管理网站内容，无需技术背景即可完成内容更新与维护。
        </div>
        
        <!-- 子栏目内容区 -->
        <div class="sub-content" id="subContent">
            <h2 id="subTitle">子栏目标题</h2>
            <div id="subDetails" class="editable">
                这里是子栏目的详细内容区域，您可以编辑此内容。系统提供了便捷的编辑功能，只需点击"编辑内容"按钮，即可对文本进行修改。
            </div>
        </div>
        
        <!-- 管理员登录面板 -->
        <div id="adminPanel">
            <h2>管理员控制台</h2>
            <div class="btn-group">
                <button id="editBtn" class="action-btn">编辑内容</button>
                <button id="saveBtn" class="action-btn" style="display:none">保存更改</button>
            </div>
            <div>
                <h3>上传新内容</h3>
                <textarea id="newContent" rows="5" style="width:100%; padding: 10px; border-radius: 4px; border: 1px solid #ddd;"></textarea>
                <div class="btn-group">
                    <button id="addBtn" class="action-btn">添加到首页</button>
                    <button id="resetBtn" class="action-btn">重置内容</button>
                </div>
            </div>
        </div>
        
        <!-- 登录按钮 -->
        <button id="adminLogin" class="action-btn">管理员登录</button>
    </div>

    <script>
        // 模式切换功能
        const modeToggle = document.getElementById('modeToggle');
        const body = document.body;
        
        // 检查本地存储中的模式设置
        if (localStorage.getItem('nightMode') === 'true') {
            body.classList.add('night-mode');
            modeToggle.textContent = '日间模式';
        }
        
        modeToggle.addEventListener('click', function() {
            body.classList.toggle('night-mode');
            
            if (body.classList.contains('night-mode')) {
                modeToggle.textContent = '日间模式';
                localStorage.setItem('nightMode', 'true');
            } else {
                modeToggle.textContent = '夜间模式';
                localStorage.setItem('nightMode', 'false');
            }
        });
        
        // 移动端菜单功能
        const mobileMenuBtn = document.getElementById('mobileMenuBtn');
        const sidebar = document.getElementById('sidebar');
        const overlay = document.getElementById('overlay');
        
        mobileMenuBtn.addEventListener('click', function() {
            sidebar.classList.add('mobile-open');
            overlay.classList.add('active');
        });
        
        overlay.addEventListener('click', function() {
            sidebar.classList.remove('mobile-open');
            overlay.classList.remove('active');
        });
        
        // 侧边栏折叠功能
        document.getElementById("toggleBtn").addEventListener("click", function() {
            const sidebar = document.getElementById("sidebar");
            sidebar.classList.toggle("collapsed");
        });
        
        // 管理员登录功能
        document.getElementById("adminLogin").addEventListener("click", function() {
            const password = prompt("请输入管理员密码:");
            if (password === "admin123") {
                document.getElementById("adminPanel").style.display = "block";
                this.style.display = "none";
            } else {
                alert("密码错误!");
            }
        });
        
        // 内容编辑功能
        document.getElementById("editBtn").addEventListener("click", function() {
            document.querySelectorAll(".editable").forEach(element => {
                element.contentEditable = true;
                element.focus();
                element.classList.add('editing');
            });
            document.getElementById("saveBtn").style.display = "inline-block";
            this.style.display = "none";
        });
        
        // 保存功能
        document.getElementById("saveBtn").addEventListener("click", function() {
            document.querySelectorAll(".editable").forEach(element => {
                element.contentEditable = false;
                element.classList.remove('editing');
            });
            this.style.display = "none";
            document.getElementById("editBtn").style.display = "inline-block";
            alert("内容已保存！");
        });
        
        // 添加新内容
        document.getElementById("addBtn").addEventListener("click", function() {
            const newContent = document.getElementById("newContent").value;
            if (newContent) {
                const newElement = document.createElement("div");
                newElement.className = "editable";
                newElement.textContent = newContent;
                document.getElementById("homeContent").appendChild(newElement);
                document.getElementById("newContent").value = "";
                alert("内容已添加到首页！");
            } else {
                alert("请输入内容后再添加！");
            }
        });
        
        // 重置内容
        document.getElementById("resetBtn").addEventListener("click", function() {
            if (confirm("确定要重置所有编辑内容吗？此操作不可撤销。")) {
                document.getElementById("newContent").value = "";
                alert("内容已重置！");
            }
        });
        
        // 子菜单功能
        document.querySelectorAll('.nav-item.has-submenu').forEach(item => {
            const arrow = item.querySelector('.arrow');
            const submenu = item.querySelector('.submenu');
            
            item.addEventListener('click', function(e) {
                // 如果点击的是子菜单项，不折叠父菜单
                if (e.target.tagName === 'LI' && e.target.parentElement === submenu) {
                    return;
                }
                
                // 收起其他打开的子菜单
                closeOtherSubmenus(item);
                
                // 切换箭头方向
                arrow.classList.toggle('down');
                
                // 切换子菜单显示状态
                submenu.classList.toggle('active');
                
                // 处理子菜单项点击事件
                if (e.target.tagName === 'LI' && e.target.parentElement === submenu) {
                    const subTitle = e.target.textContent;
                    document.getElementById('subTitle').textContent = subTitle;
                    
                    
                    
                    document.getElementById('subDetails').textContent = contentMap[subTitle] || "这里是子栏目的详细内容";
                    
                    // 显示子栏目内容区
                    document.getElementById('subContent').style.display = 'block';
                    
                    // 在移动设备上关闭侧边栏
                    if (window.innerWidth <= 768) {
                        sidebar.classList.remove('mobile-open');
                        overlay.classList.remove('active');
                    }
                }
            });
        });
        
        // 收起其他打开的子菜单
        function closeOtherSubmenus(currentItem) {
            document.querySelectorAll('.nav-item.has-submenu').forEach(item => {
                if (item !== currentItem) {
                    const arrow = item.querySelector('.arrow');
                    const submenu = item.querySelector('.submenu');
                    
                    if (submenu.classList.contains('active')) {
                        arrow.classList.remove('down');
                        submenu.classList.remove('active');
                    }
                }
            });
        }
        
        // 首页菜单项点击
        document.querySelector('.nav-item:first-child').addEventListener('click', function() {
            document.getElementById('subContent').style.display = 'none';
            
            // 在移动设备上关闭侧边栏
            if (window.innerWidth <= 768) {
                sidebar.classList.remove('mobile-open');
                overlay.classList.remove('active');
            }
            
            // 收起所有打开的子菜单
            closeAllSubmenus();
        });
        
        // 收起所有子菜单
        function closeAllSubmenus() {
            document.querySelectorAll('.nav-item.has-submenu').forEach(item => {
                const arrow = item.querySelector('.arrow');
                const submenu = item.querySelector('.submenu');
                
                if (submenu.classList.contains('active')) {
                    arrow.classList.remove('down');
                    submenu.classList.remove('active');
                }
            });
        }
        
        // 子菜单项点击事件
        document.querySelectorAll('.submenu li').forEach(subItem => {
            subItem.addEventListener('click', function() {
                // 移除所有子菜单项的激活状态
                document.querySelectorAll('.submenu li').forEach(item => {
                    item.classList.remove('active');
                });
                
                // 添加当前激活状态
                this.classList.add('active');
                
                // 更新内容
                const subTitle = this.textContent;
                document.getElementById('subTitle').textContent = subTitle;
                
                // 设置子栏目内容
                const contentMap = {
                        "旗舰产品": "这是我们公司的旗舰产品，代表了行业最高水平的技术和设计。它集成了多项专利技术，满足高端用户的所有需求。",
                        "新品发布": "我们即将推出的新品融合了创新技术和用户反馈，性能提升30%，操作更便捷，设计更时尚。",
                        "产品分类": "产品分为三大类：企业级解决方案、专业工具和个人应用，满足不同用户群体的需求。",
                        "解决方案": "根据不同行业需求定制的完整解决方案，帮助客户实现数字化转型，提升业务效率。",
                        "咨询服务": "专业咨询团队由行业专家组成，提供战略规划和业务优化服务，助力企业成长。",
                        "技术支持": "7x24小时专业技术支持服务，快速响应客户需求，解决技术难题。",
                        "定制开发": "根据客户特定需求进行软件开发，打造专属的业务系统，提升企业竞争力。",
                        "培训服务": "提供产品使用培训和技能提升课程，帮助客户团队快速掌握技术，提高工作效率。",
                        "公司简介": "我们是一家专注于企业服务的科技公司，成立于2010年，已服务超过500家企业客户。",
                        "发展历程": "从初创公司到行业领导者，我们经历了多个重要发展阶段，始终坚持创新和客户至上的理念。",
                        "团队介绍": "团队由来自知名企业的技术专家和行业资深人士组成，拥有丰富的经验和专业知识。",
                        "荣誉资质": "获得了多项行业认证和奖项，包括ISO9001认证、国家高新技术企业等，证明了我们的专业实力。",
                        "联系我们": "总部地址：北京市海淀区科技园88号\n电话：010-88889999\n邮箱：contact@company.com",
                        "分支机构": "我们在上海、广州、深圳设有分公司，服务覆盖全国，为客户提供本地化支持。",
                        "在线留言": "有任何问题或建议，请在此留言，我们会在24小时内回复您的问题。",
                        "招贤纳士": "我们正在招聘以下职位：前端开发工程师、产品经理、销售代表。欢迎加入我们的团队！"
                    };
                
                document.getElementById('subDetails').textContent = contentMap[subTitle] || "这里是子栏目的详细内容";
                
                // 显示子栏目内容区
                document.getElementById('subContent').style.display = 'block';
                
                // 在移动设备上关闭侧边栏
                if (window.innerWidth <= 768) {
                    sidebar.classList.remove('mobile-open');
                    overlay.classList.remove('active');
                }
            });
        });
        
        // 窗口大小变化时调整布局
        window.addEventListener('resize', function() {
            if (window.innerWidth > 768) {
                sidebar.classList.remove('mobile-open');
                overlay.classList.remove('active');
            }
        });
        
        // 初始加载时，如果侧边栏是折叠状态，隐藏箭头
        if (sidebar.classList.contains('collapsed')) {
            document.querySelectorAll('.arrow').forEach(arrow => {
                arrow.style.display = 'none';
            });
        }
    </script>
</body>
</html>
